<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <record id="auth_jwt_request_view_form" model="ir.ui.view">
        <field name="name">auth.jwt.request.view.form</field>
        <field name="model">auth.jwt.request</field>
        <field name="arch" type="xml">
            <form create="0" edit="0" delete="0">
                <sheet>
                    <div class="float-end" invisible="not country_id">
                        <field
                            name="country_flag"
                            widget="image_url"
                            options="{&quot;size&quot;: [32, 32]}"
                        />
                    </div>
                    <div class="oe_title">
                        <h1><field name="display_name" /></h1>
                    </div>
                    <group id="general_info">
                        <group string="Details">
                            <field name="authorization" />
                            <field name="request_id" invisible="1" />
                            <field name="method" />
                            <field name="url" widget="url" />
                            <field name="country_id" invisible="not country_id" />
                        </group>
                        <group id="visits" string="Visits">
                            <field name="validator_id" />
                            <field name="ip_address" />
                            <field name="request_date" />
                        </group>
                    </group>
                    <div id="payload">
                        <separator string="Payload" />
                        <field name="payload" nolabel="1" />
                    </div>
                    <div id="request_body">
                        <separator string="Request Body" />
                        <field name="request_body" nolabel="1" />
                    </div>
                </sheet>
            </form>
        </field>
    </record>

    <record id="auth_jwt_request_view_tree" model="ir.ui.view">
        <field name="name">auth.jwt.request.view.tree</field>
        <field name="model">auth.jwt.request</field>
        <field name="arch" type="xml">
            <list sample="1" create="0" edit="0" delete="0">
                <field name="name" />
                <field name="partner_id" />
                <field name="request_date" />
                <field name="url" />
                <field name="method" />
                <field name="ip_address" />
                <field name="country_id" />
                <field name="validator_id" />
            </list>
        </field>
    </record>

    <record id="auth_jwt_request_view_kanban" model="ir.ui.view">
        <field name="name">auth.jwt.request.view.kanban</field>
        <field name="model">auth.jwt.request</field>
        <field name="arch" type="xml">
            <kanban class="o_jwt_log_kanban" sample="1" create="0" edit="0" delete="0">
                <field name="id" />
                <field name="country_id" />
                <field name="country_flag" />
                <field name="request_id" />
                <field name="partner_id" />
                <field name="partner_image" />
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click o_jwt_log_kanban_card">
                            <div class="o_kanban_detail_ungrouped row mx-0">
                                <div
                                    class="col-lg-4 col-sm-12 col-12 py-0 my-2 my-lg-0"
                                >
                                    <div class="d-flex">
                                        <div class="o_jwt_log_kanban_image me-3">
                                            <img
                                                t-if="record.partner_image.raw_value"
                                                t-att-src="kanban_image('res.partner', 'avatar_128', record.partner_id.raw_value)"
                                                width="54px"
                                                height="54px"
                                                alt="Partner"
                                            />
                                            <img
                                                t-else=""
                                                t-attf-src="/base/static/img/avatar_grey.png"
                                                width="54px"
                                                height="54px"
                                                alt="Partner"
                                            />
                                        </div>
                                        <div
                                            class="o_jwt_request_name d-flex flex-grow-1 flex-column my-0 my-lg-2"
                                        >
                                            <div class="d-flex align-items-start">
                                                <b><field name="request_id" /></b>
                                            </div>
                                            <div class="d-flex align-items-end">
                                                <field name="url" widget="url" />
                                            </div>
                                            <!-- Double check is necessary for sample view (or error image are shown) -->
                                            <div
                                                t-if="record.country_id.raw_value and record.country_flag.raw_value"
                                            >
                                                <img
                                                    t-att-src="record.country_flag.raw_value"
                                                    class="o_country_flag"
                                                    alt="Country"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-2 col-sm-3 col-12 py-0 my-2">
                                    <b><field name="time_since_last_action" /></b>
                                    <div>Last Action</div>
                                </div>
                                <div class="col-lg-2 col-sm-3 col-6 py-0 my-2">
                                    <field
                                        name="method"
                                        widget="label_selection"
                                        options="{'classes': {'GET': 'success', 'POST': 'warning', 'PUT': 'info', 'DELETE': 'danger'}}"
                                    />
                                    <div>Methods</div>
                                </div>
                                <div class="col-lg-2 col-sm-3 col-12 py-0 my-2">
                                    <b><field name="ip_address" /></b>
                                    <div>IP Address</div>
                                </div>
                                <div class="col-lg-2 col-sm-3 col-12 py-0 my-2">
                                    <b><field name="validator_id" /></b>
                                    <div>Validator</div>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="action_auth_jwt_request" model="ir.actions.act_window">
        <field name="name">JWT Validators</field>
        <field name="res_model">auth.jwt.request</field>
        <field name="view_mode">kanban,list,form</field>
    </record>

    <menuitem
        id="menu_auth_jwt_request"
        name="JWT Request"
        parent="base.menu_users"
        sequence="30"
        action="action_auth_jwt_request"
        groups="base.group_no_one"
    />

</odoo>
